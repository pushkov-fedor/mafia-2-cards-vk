{"version":3,"sources":["routes.js","pages/Home.page.js","constants.js","api.js","components/ErrorSnackbar.js","pages/CreateGame.page.js","pages/JoinGame.page.js","pages/WaitGame.page.js","components/GameFeed.component.js","utils/getCardNameByType.js","components/MyCard.component.js","utils/getAlivePlayersNumber.js","utils/getPlayerById.js","utils/getVotedPlayersNumber.js","utils/isAlive.js","utils/isGameFinished.js","pages/Game.page.js","utils/getOtherPlayersAlive.js","utils/isMafia.js","pages/Mafia.page.js","utils/isPolice.js","pages/Police.page.js","pages/Civils.page.js","utils/isBeforeNightPhase.js","assets/playersSleep.mp3","assets/playersWakeUp.mp3","assets/mafiaSleep.mp3","assets/mafiaWakeUp.mp3","assets/policeSleep.mp3","assets/policeWakeUp.mp3","sound-manager.js","pages/Intro.page.js","App.js","utils/isDiscussionPhase.js","utils/isMafiaTurnPhase.js","utils/isPoliceTurnPhase.js","utils/isCivilsTurnPhase.js","index.js"],"names":["mainPanels","MainHomePage","setActivePanel","panelHeaderMessage","size","stretched","onClick","BaseUrl","GameStatus","GamePhase","GameAudioPhase","CardType","HealthStatus","GameResult","GameApi","creatorName","playerPhotoUrl","civilsNumber","mafiaNumber","hasPolice","axios","post","playerName","gameId","get","playerId","playerVoteValue","ErrorSnackbar","closeSnackbar","errorMessage","onClose","before","MainCreateGamePage","setGame","setPlayerId","subscribeToGame","useState","hostName","setHostName","numberOfCivils","setNumberOfCivils","numberOfMafia","setNumberOfMafia","setHasPolice","name","controlsTouchedStatus","setControlsTouchedStatus","snackbarError","setSnackbarError","touchControl","controlName","left","onSubmit","e","preventDefault","top","status","bottom","type","value","onChange","currentTarget","onFocus","placeholder","checked","mode","disabled","Number","then","response","data","game","id","catch","MainJoinGamePage","roomCodeControlValue","setRoomCodeControlValue","nameControlValue","setNameControlValue","roomCode","toUpperCase","console","log","gameStatus","message","MainWaitGamePage","player","players","find","level","weight","className","length","playersNumber","header","map","src","photoUrl","isHost","GameFeedComponent","actions","action","killedPlayer","description","cardType","displayCardNameSave","MyCardComponent","displayCardName","setDisplayCardName","card","after","getCardNameByType","filter","votingPull","GameModals","MainGamePage","getPlayerById","setPlayer","activeModal","setActiveModal","hasVoted","setHasVoted","onFinishedGame","modal","subheader","icon","useEffect","isGameFinished","result","gamePhase","style","margin","isAlive","getVotedPlayersNumber","getAlivePlayersNumber","MafiaPage","getOtherPlayersAlive","otherPlayers","selectedPlayerId","setSelectedPlayerId","isMafia","PoliceModals","PolicePage","onEndNight","isPolice","selectedPlayer","CivilsPage","soundManager","playersSleep","Howl","playersWakeUp","mafiaSleep","mafiaWakeUp","policeSleep","policeWakeUp","IntroPage","hasSeenIntro","App","setPlayerPhotoUrl","gameAudioPhase","setGameAudioPhase","activeView","activePanel","intervalId","setIntervalId","setInterval","responsee","clearInterval","isBeforeNightPhase","isDiscussionPhase","isMafiaTurnPhase","isPoliceTurnPhase","isCivilsTurnPhase","undefined","play","bridge","send","res","photo_200","centered","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.05724ea5.chunk.js","sourcesContent":["export const mainPanels = {\r\n  intro: \"Intro\",\r\n  home: \"Home\",\r\n  createGame: \"CreateGame\",\r\n  joinGame: \"JoinGame\",\r\n  waitGame: \"WaitGame\",\r\n  game: \"Game\",\r\n  mafia: \"Mafia\",\r\n  police: \"Police\",\r\n  civils: \"Civils\",\r\n};\r\n","import React from \"react\";\r\n\r\nimport { Button, Div, PanelHeader } from \"@vkontakte/vkui\";\r\nimport { mainPanels } from \"../routes\";\r\n\r\nexport default function MainHomePage({ setActivePanel, panelHeaderMessage }) {\r\n  return (\r\n    <>\r\n      <PanelHeader>{panelHeaderMessage}</PanelHeader>\r\n      <Div>\r\n        <Button\r\n          size=\"l\"\r\n          stretched\r\n          onClick={() => setActivePanel(mainPanels.createGame)}\r\n        >\r\n          Создать игру\r\n        </Button>\r\n      </Div>\r\n      <Div>\r\n        <Button\r\n          size=\"l\"\r\n          stretched\r\n          onClick={() => setActivePanel(mainPanels.joinGame)}\r\n        >\r\n          Присоединиться\r\n        </Button>\r\n      </Div>\r\n    </>\r\n  );\r\n}\r\n","export const BaseUrl = \"https://mafia2cards.herokuapp.com/api\";\r\n\r\nexport const GameStatus = {\r\n  Created: 0,\r\n  Started: 1,\r\n  Finished: 2,\r\n};\r\n\r\nexport const GamePhase = {\r\n  MafiaTurn: 0,\r\n  PoliceTurn: 1,\r\n  Discussion: 2,\r\n  CivilsTurn: 3,\r\n  BeforeNight: 4,\r\n};\r\n\r\nexport const GameAudioPhase = {\r\n  PlayersSleep: 0,\r\n  PlayersWakeUp: 1,\r\n  MafiaSleep: 2,\r\n  MafiaWakeUp: 3,\r\n  PoliceSleep: 4,\r\n  PoliceWakeUp: 5,\r\n};\r\n\r\nexport const CardType = {\r\n  Mafia: 0,\r\n  Police: 1,\r\n  Civil: 2,\r\n};\r\n\r\nexport const HealthStatus = {\r\n  Alive: 0,\r\n  Injured: 1,\r\n  Dead: 2,\r\n};\r\n\r\nexport const GameResult = {\r\n  MafiaWins: 0,\r\n  CivilWins: 1,\r\n};\r\n","import axios from \"axios\";\r\nimport { BaseUrl } from \"./constants\";\r\n\r\nexport const GameApi = {\r\n  createGame: (\r\n    creatorName,\r\n    playerPhotoUrl,\r\n    civilsNumber,\r\n    mafiaNumber,\r\n    hasPolice\r\n  ) =>\r\n    axios.post(`${BaseUrl}/game2/create`, {\r\n      creatorName,\r\n      playerPhotoUrl,\r\n      civilsNumber,\r\n      mafiaNumber,\r\n      hasPolice,\r\n    }),\r\n  joinGame: (playerName, playerPhotoUrl, gameId) =>\r\n    axios.post(`${BaseUrl}/game2/join`, {\r\n      playerName,\r\n      playerPhotoUrl,\r\n      gameId,\r\n    }),\r\n  getGame: (gameId) => axios.get(`${BaseUrl}/game2/get/${gameId}`),\r\n  starGame: (gameId) =>\r\n    axios.post(`${BaseUrl}/game2/start`, {\r\n      gameId,\r\n    }),\r\n  startNight: (gameId, playerId) =>\r\n    axios.post(`${BaseUrl}/game2/startNight`, {\r\n      gameId,\r\n      playerId,\r\n    }),\r\n  mafiaKill: (gameId, playerId, playerVoteValue) =>\r\n    axios.post(`${BaseUrl}/game2/mafiaKill`, {\r\n      gameId,\r\n      playerId,\r\n      playerVoteValue,\r\n    }),\r\n  endNight: (gameId) =>\r\n    axios.post(`${BaseUrl}/game2/endNight`, {\r\n      gameId,\r\n    }),\r\n  startTrial: (gameId, playerId) =>\r\n    axios.post(`${BaseUrl}/game2/startTrial`, {\r\n      gameId,\r\n      playerId,\r\n    }),\r\n  civilsKill: (gameId, playerId, playerVoteValue) =>\r\n    axios.post(`${BaseUrl}/game2/civilsKill`, {\r\n      gameId,\r\n      playerId,\r\n      playerVoteValue,\r\n    }),\r\n};\r\n","import React from \"react\";\r\nimport { Icon16ErrorCircleFill } from \"@vkontakte/icons\";\r\nimport { Snackbar } from \"@vkontakte/vkui\";\r\n\r\nexport default function ErrorSnackbar({ closeSnackbar, errorMessage }) {\r\n  return (\r\n    <Snackbar onClose={closeSnackbar} before={<Icon16ErrorCircleFill />}>\r\n      {errorMessage}\r\n    </Snackbar>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Button,\r\n  Checkbox,\r\n  FormItem,\r\n  FormLayout,\r\n  Group,\r\n  Input,\r\n  PanelHeader,\r\n  PanelHeaderBack,\r\n} from \"@vkontakte/vkui\";\r\nimport { mainPanels } from \"../routes\";\r\nimport { GameApi } from \"../api\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\n\r\nexport default function MainCreateGamePage({\r\n  setActivePanel,\r\n  setGame,\r\n  setPlayerId,\r\n  subscribeToGame,\r\n  panelHeaderMessage,\r\n  playerPhotoUrl,\r\n}) {\r\n  const [hostName, setHostName] = useState(\"\");\r\n  const [numberOfCivils, setNumberOfCivils] = useState(5);\r\n  const [numberOfMafia, setNumberOfMafia] = useState(1);\r\n  const [hasPolice, setHasPolice] = useState(false);\r\n  const [controlsTouchedStatus, setControlsTouchedStatus] = useState({\r\n    name: false,\r\n    numberOfCivils: false,\r\n    numberOfMafia: false,\r\n  });\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // public methods\r\n  const touchControl = (controlName) => {\r\n    setControlsTouchedStatus({ ...controlsTouchedStatus, [controlName]: true });\r\n  };\r\n  const onCreateGame = () => {\r\n    GameApi.createGame(\r\n      hostName,\r\n      playerPhotoUrl,\r\n      Number(numberOfCivils),\r\n      Number(numberOfMafia),\r\n      hasPolice\r\n    )\r\n      .then((response) => {\r\n        setGame(response.data.game);\r\n        setPlayerId(response.data.playerId);\r\n        subscribeToGame(response.data.game.id);\r\n        setActivePanel(mainPanels.waitGame);\r\n      })\r\n      .catch((e) => setSnackbarError(e));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack onClick={() => setActivePanel(mainPanels.home)} />\r\n        }\r\n      >\r\n        {panelHeaderMessage}\r\n      </PanelHeader>\r\n      <Group>\r\n        <FormLayout\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n          }}\r\n        >\r\n          <FormItem\r\n            top=\"Имя\"\r\n            status={\r\n              hostName\r\n                ? \"valid\"\r\n                : controlsTouchedStatus.name\r\n                ? \"error\"\r\n                : \"default\"\r\n            }\r\n            bottom={\r\n              !hostName && controlsTouchedStatus.name\r\n                ? \"Это поле обязательное\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <Input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={hostName}\r\n              onChange={(e) => {\r\n                setHostName(e.currentTarget.value);\r\n              }}\r\n              onFocus={(e) => touchControl(\"name\")}\r\n              placeholder=\"Мое имя\"\r\n            />\r\n          </FormItem>\r\n          <FormItem\r\n            top=\"Количество мирных жителей\"\r\n            status={\r\n              numberOfCivils\r\n                ? \"valid\"\r\n                : controlsTouchedStatus.numberOfCivils\r\n                ? \"error\"\r\n                : \"default\"\r\n            }\r\n            bottom={\r\n              !numberOfCivils && controlsTouchedStatus.numberOfCivils\r\n                ? \"Это поле обязательное\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <Input\r\n              type=\"number\"\r\n              name=\"numberOfCivils\"\r\n              value={numberOfCivils}\r\n              onChange={(e) => {\r\n                setNumberOfCivils(e.currentTarget.value);\r\n              }}\r\n              onFocus={(e) => touchControl(\"numberOfCivils\")}\r\n            />\r\n          </FormItem>\r\n          <FormItem\r\n            top=\"Количество мафии\"\r\n            status={\r\n              numberOfMafia\r\n                ? \"valid\"\r\n                : controlsTouchedStatus.numberOfMafia\r\n                ? \"error\"\r\n                : \"default\"\r\n            }\r\n            bottom={\r\n              !numberOfMafia && controlsTouchedStatus.numberOfMafia\r\n                ? \"Это поле обязательное\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <Input\r\n              type=\"number\"\r\n              name=\"numberOfMafia\"\r\n              value={numberOfMafia}\r\n              onChange={(e) => {\r\n                setNumberOfMafia(e.currentTarget.value);\r\n              }}\r\n              onFocus={(e) => touchControl(\"numberOfMafia\")}\r\n            />\r\n          </FormItem>\r\n          <Checkbox\r\n            value={hasPolice}\r\n            onChange={(e) => setHasPolice(e.currentTarget.checked)}\r\n          >\r\n            Добавить комиссара\r\n          </Checkbox>\r\n          <FormItem>\r\n            <Button\r\n              mode=\"commerce\"\r\n              type=\"submit\"\r\n              stretched\r\n              size=\"l\"\r\n              disabled={!hostName || !numberOfCivils || !numberOfMafia}\r\n              onClick={onCreateGame}\r\n            >\r\n              Создать\r\n            </Button>\r\n          </FormItem>\r\n        </FormLayout>\r\n      </Group>\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import {\r\n  Button,\r\n  FormItem,\r\n  FormLayout,\r\n  Group,\r\n  Input,\r\n  PanelHeader,\r\n  PanelHeaderBack,\r\n} from \"@vkontakte/vkui\";\r\nimport React, { useState } from \"react\";\r\nimport { GameApi } from \"../api\";\r\nimport { mainPanels } from \"../routes\";\r\nimport { GameStatus } from \"../constants\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\n\r\nexport default function MainJoinGamePage({\r\n  setActivePanel,\r\n  setGame,\r\n  setPlayerId,\r\n  subscribeToGame,\r\n  panelHeaderMessage,\r\n  playerPhotoUrl,\r\n}) {\r\n  // ui state\r\n  const [roomCodeControlValue, setRoomCodeControlValue] = useState(\"\");\r\n  const [nameControlValue, setNameControlValue] = useState(\"\");\r\n  const [controlsTouchedStatus, setControlsTouchedStatus] = useState({\r\n    roomCode: false,\r\n    name: false,\r\n  });\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // public methods\r\n  const touchControl = (controlName) => {\r\n    setControlsTouchedStatus({ ...controlsTouchedStatus, [controlName]: true });\r\n  };\r\n  const onJoin = () => {\r\n    GameApi.joinGame(nameControlValue, playerPhotoUrl, roomCodeControlValue)\r\n      .then((response) => {\r\n        console.log(response);\r\n        setGame(response.data.game);\r\n        setPlayerId(response.data.playerId);\r\n        subscribeToGame(response.data.game.id);\r\n        if (response.data.game.gameStatus === GameStatus.Started) {\r\n          setActivePanel(mainPanels.game);\r\n          return;\r\n        }\r\n        setActivePanel(mainPanels.waitGame);\r\n      })\r\n      .catch((e) => {\r\n        const errorMessage = e.response.data.message;\r\n        setSnackbarError(errorMessage);\r\n      });\r\n  };\r\n  return (\r\n    <>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack onClick={() => setActivePanel(mainPanels.home)} />\r\n        }\r\n      >\r\n        {panelHeaderMessage}\r\n      </PanelHeader>\r\n      <Group>\r\n        <FormLayout\r\n          onSubmit={(e) => {\r\n            e.preventDefault();\r\n          }}\r\n        >\r\n          <FormItem\r\n            top=\"Код комнаты\"\r\n            status={\r\n              roomCodeControlValue\r\n                ? \"valid\"\r\n                : controlsTouchedStatus.roomCode\r\n                ? \"error\"\r\n                : \"default\"\r\n            }\r\n            bottom={\r\n              !roomCodeControlValue && controlsTouchedStatus.roomCode\r\n                ? \"Это поле обязательное\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <Input\r\n              type=\"text\"\r\n              name=\"roomCode\"\r\n              value={roomCodeControlValue}\r\n              onChange={(e) => {\r\n                setRoomCodeControlValue(e.currentTarget.value.toUpperCase());\r\n              }}\r\n              onFocus={(e) => touchControl(\"roomCode\")}\r\n              placeholder=\"MF12P5\"\r\n            />\r\n          </FormItem>\r\n          <FormItem\r\n            top=\"Имя\"\r\n            status={\r\n              nameControlValue\r\n                ? \"valid\"\r\n                : controlsTouchedStatus.name\r\n                ? \"error\"\r\n                : \"default\"\r\n            }\r\n            bottom={\r\n              !nameControlValue && controlsTouchedStatus.name\r\n                ? \"Это поле обязательное\"\r\n                : \"\"\r\n            }\r\n          >\r\n            <Input\r\n              type=\"text\"\r\n              name=\"name\"\r\n              value={nameControlValue}\r\n              onChange={(e) => {\r\n                setNameControlValue(e.currentTarget.value);\r\n              }}\r\n              onFocus={(e) => touchControl(\"name\")}\r\n              placeholder=\"Твое имя\"\r\n            />\r\n          </FormItem>\r\n          <FormItem>\r\n            <Button\r\n              mode=\"commerce\"\r\n              type=\"submit\"\r\n              stretched\r\n              size=\"l\"\r\n              disabled={!roomCodeControlValue || !nameControlValue}\r\n              onClick={onJoin}\r\n            >\r\n              Присоединиться\r\n            </Button>\r\n          </FormItem>\r\n        </FormLayout>\r\n      </Group>\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useState } from \"react\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Caption,\r\n  Div,\r\n  Group,\r\n  Header,\r\n  PanelHeader,\r\n  PanelHeaderBack,\r\n  SimpleCell,\r\n  Title,\r\n} from \"@vkontakte/vkui\";\r\nimport { mainPanels } from \"../routes\";\r\nimport \"./WaitGame.page.css\";\r\nimport { GameApi } from \"../api\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\n\r\nexport default function MainWaitGamePage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  game,\r\n  playerId,\r\n}) {\r\n  // game models\r\n  const player = game.players.find((player) => player.id === playerId);\r\n  // ui state\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // methods\r\n  const onStartGame = () => {\r\n    GameApi.starGame(game.id)\r\n      .then((response) => {\r\n        setActivePanel(mainPanels.game);\r\n      })\r\n      .catch((e) => setSnackbarError(e));\r\n  };\r\n  return (\r\n    <>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack onClick={() => setActivePanel(mainPanels.home)} />\r\n        }\r\n      >\r\n        {panelHeaderMessage}\r\n      </PanelHeader>\r\n      <Group>\r\n        <Div>\r\n          <Title level=\"1\" weight=\"bold\" className=\"wait-game-panel__room-code\">\r\n            Код игры: {game.id}\r\n          </Title>\r\n          <Caption\r\n            level=\"1\"\r\n            weight=\"regular\"\r\n            className=\"wait-game-panel__code-description\"\r\n          >\r\n            Поделитесь этим кодом с друзьями, чтобы они к вам присоединились\r\n          </Caption>\r\n          <Title\r\n            level=\"2\"\r\n            weight=\"regular\"\r\n            className=\"wait-game-panel__room-players\"\r\n          >\r\n            Игроков: {game.players.length}/{game.playersNumber}\r\n          </Title>\r\n        </Div>\r\n      </Group>\r\n      <Group header={<Header>Игроки</Header>}>\r\n        <Div>\r\n          {game.players.map((player) => (\r\n            <SimpleCell\r\n              before={<Avatar src={player.photoUrl} />}\r\n              key={player.id}\r\n            >\r\n              {player.name}\r\n            </SimpleCell>\r\n          ))}\r\n        </Div>\r\n      </Group>\r\n      <Div>\r\n        <Button\r\n          mode=\"commerce\"\r\n          size=\"l\"\r\n          stretched\r\n          disabled={\r\n            !(game.players.length === game.playersNumber && player.isHost)\r\n          }\r\n          onClick={onStartGame}\r\n        >\r\n          Начать игру\r\n        </Button>\r\n      </Div>\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { Avatar, SimpleCell } from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\n\r\nexport default function GameFeedComponent({ actions = [] }) {\r\n  return (\r\n    <>\r\n      {actions.map((action) => (\r\n        <SimpleCell\r\n          key={action.id}\r\n          before={<Avatar src={action.killedPlayer.photoUrl} />}\r\n          description={action.message}\r\n        >\r\n          {action.killedPlayer.name}\r\n        </SimpleCell>\r\n      ))}\r\n    </>\r\n  );\r\n}\r\n","import { CardType } from \"../constants\";\r\n\r\nexport default (cardType) => {\r\n  switch (cardType) {\r\n    case CardType.Mafia:\r\n      return \"Мафия\";\r\n    case CardType.Police:\r\n      return \"Комиссар\";\r\n    case CardType.Civil:\r\n      return \"Мирный житель\";\r\n    default:\r\n      return \"Карты с таким типом не существует\";\r\n  }\r\n};\r\n","import { Icon24Hide, Icon24HideOutline } from \"@vkontakte/icons\";\r\nimport { Div, SimpleCell, Title } from \"@vkontakte/vkui\";\r\nimport React, { useState } from \"react\";\r\nimport getCardNameByType from \"../utils/getCardNameByType\";\r\n\r\nlet displayCardNameSave = true;\r\n\r\nexport default function MyCardComponent({ player }) {\r\n  const [displayCardName, setDisplayCardName] = useState(displayCardNameSave);\r\n  return (\r\n    <>\r\n      <Div>\r\n        <Title level=\"2\" weight=\"medium\">\r\n          Твоя карта\r\n        </Title>\r\n      </Div>\r\n      {player.card && (\r\n        <SimpleCell\r\n          after={\r\n            displayCardName ? (\r\n              <Icon24HideOutline\r\n                onClick={() => {\r\n                  setDisplayCardName(false);\r\n                  displayCardNameSave = false;\r\n                }}\r\n              />\r\n            ) : (\r\n              <Icon24Hide\r\n                onClick={() => {\r\n                  setDisplayCardName(true);\r\n                  displayCardNameSave = true;\r\n                }}\r\n              />\r\n            )\r\n          }\r\n        >\r\n          {displayCardName\r\n            ? getCardNameByType(player.card.type)\r\n            : \"Карта скрыта\"}\r\n        </SimpleCell>\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { HealthStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game.players.filter((player) => player.status === HealthStatus.Alive).length;\r\n","export default (game, playerId) =>\r\n  game.players.find((player) => player.id === playerId);\r\n","export default (game) => game.votingPull.length;\r\n","import { HealthStatus } from \"../constants\";\r\n\r\nexport default (player) => player.status !== HealthStatus.Dead;\r\n","import { GameStatus } from \"../constants\";\r\n\r\nexport default (game) => game && game.gameStatus === GameStatus.Finished;\r\n","import { Icon56CupMusicNoteOutline } from \"@vkontakte/icons\";\r\nimport {\r\n  Button,\r\n  Div,\r\n  ModalRoot,\r\n  PanelHeader,\r\n  PanelHeaderBack,\r\n  SplitCol,\r\n  SplitLayout,\r\n  Separator,\r\n  ModalCard,\r\n} from \"@vkontakte/vkui\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { GameApi } from \"../api\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\nimport GameFeedComponent from \"../components/GameFeed.component\";\r\nimport MyCardComponent from \"../components/MyCard.component\";\r\nimport { GamePhase, GameResult } from \"../constants\";\r\nimport { mainPanels } from \"../routes\";\r\nimport getAlivePlayersNumber from \"../utils/getAlivePlayersNumber\";\r\nimport getPlayerById from \"../utils/getPlayerById\";\r\nimport getVotedPlayersNumber from \"../utils/getVotedPlayersNumber\";\r\nimport isAlive from \"../utils/isAlive\";\r\nimport isGameFinished from \"../utils/isGameFinished\";\r\nimport \"./Game.page.css\";\r\n\r\nconst GameModals = {\r\n  MafiaWins: \"MafiaWins\",\r\n  CivilWins: \"CivilWins\",\r\n};\r\n\r\nexport default function MainGamePage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  game,\r\n  playerId,\r\n}) {\r\n  // game models\r\n  const [player, setPlayer] = useState(getPlayerById(game, playerId));\r\n  // ui state\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [hasVoted, setHasVoted] = useState(false);\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // methods\r\n  const onStartNight = () => {\r\n    setHasVoted(true);\r\n    GameApi.startNight(game.id, player.name).catch((e) => setSnackbarError(e));\r\n  };\r\n  const onStartTrial = () => {\r\n    setHasVoted(true);\r\n    GameApi.startTrial(game.id, playerId).catch((e) => setSnackbarError(e));\r\n  };\r\n  const onFinishedGame = () => {\r\n    setActiveModal(null);\r\n    setActivePanel(mainPanels.home);\r\n  };\r\n  // modal\r\n  const modal = (\r\n    <ModalRoot activeModal={activeModal}>\r\n      <ModalCard\r\n        id={GameModals.MafiaWins}\r\n        header=\"Результат\"\r\n        subheader=\"Победила мафия\"\r\n        icon={<Icon56CupMusicNoteOutline />}\r\n        onClose={onFinishedGame}\r\n        actions={\r\n          <Button size=\"l\" mode=\"primary\" onClick={onFinishedGame}>\r\n            Завершить игру\r\n          </Button>\r\n        }\r\n      />\r\n      <ModalCard\r\n        id={GameModals.CivilWins}\r\n        header=\"Результат\"\r\n        subheader=\"Победили мирные жители\"\r\n        icon={<Icon56CupMusicNoteOutline />}\r\n        onClose={onFinishedGame}\r\n        actions={\r\n          <Button size=\"l\" mode=\"primary\" onClick={onFinishedGame}>\r\n            Завершить игру\r\n          </Button>\r\n        }\r\n      />\r\n    </ModalRoot>\r\n  );\r\n  // effects\r\n  useEffect(() => {\r\n    setPlayer(getPlayerById(game, playerId));\r\n  }, [game]);\r\n  useEffect(() => {\r\n    if (isGameFinished(game) && game.result === GameResult.CivilWins) {\r\n      setActiveModal(GameModals.CivilWins);\r\n    }\r\n    if (isGameFinished(game) && game.result === GameResult.MafiaWins) {\r\n      setActiveModal(GameModals.MafiaWins);\r\n    }\r\n  }, [game.result]);\r\n  useEffect(() => {\r\n    setHasVoted(false);\r\n  }, [game.gamePhase]);\r\n  return (\r\n    <>\r\n      <PanelHeader\r\n        left={\r\n          <PanelHeaderBack onClick={() => setActivePanel(mainPanels.home)} />\r\n        }\r\n      >\r\n        {panelHeaderMessage}\r\n      </PanelHeader>\r\n      <SplitLayout modal={modal}>\r\n        <SplitCol>\r\n          <MyCardComponent player={player} />\r\n          <Separator style={{ margin: \"12px 0\" }} />\r\n          <Div>\r\n            {game.gamePhase === GamePhase.BeforeNight && (\r\n              <Button\r\n                size=\"l\"\r\n                stretched\r\n                onClick={onStartNight}\r\n                disabled={!isAlive(player) || hasVoted}\r\n              >\r\n                {getVotedPlayersNumber(game) === 0\r\n                  ? \"Начать ночь\"\r\n                  : `Начать ночь (голосов ${getVotedPlayersNumber(\r\n                      game\r\n                    )} из ${getAlivePlayersNumber(game)})`}\r\n              </Button>\r\n            )}\r\n            {game.gamePhase === GamePhase.Discussion && (\r\n              <Button\r\n                size=\"l\"\r\n                stretched\r\n                onClick={onStartTrial}\r\n                disabled={!isAlive(player) || hasVoted}\r\n              >\r\n                {getVotedPlayersNumber(game) === 0\r\n                  ? \"Начать суд\"\r\n                  : `Начать суд (голосов ${getVotedPlayersNumber(\r\n                      game\r\n                    )} из ${getAlivePlayersNumber(game)})`}\r\n              </Button>\r\n            )}\r\n          </Div>\r\n          {isAlive(player) && hasVoted && (\r\n            <Div>Ваш голос учтен, ждем остальных игроков</Div>\r\n          )}\r\n          <GameFeedComponent actions={game.actions} />\r\n        </SplitCol>\r\n      </SplitLayout>\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { HealthStatus } from \"../constants\";\r\n\r\nexport default (game, playerId) =>\r\n  game.players.filter(\r\n    (player) => player.id !== playerId && player.status !== HealthStatus.Dead\r\n  );\r\n","import { CardType } from \"../constants\";\r\n\r\nexport default (player) => player.card.type === CardType.Mafia;\r\n","import {\r\n  Avatar,\r\n  Button,\r\n  Cell,\r\n  Div,\r\n  Group,\r\n  PanelHeader,\r\n  Title,\r\n} from \"@vkontakte/vkui\";\r\nimport React, { useState } from \"react\";\r\nimport { useEffect } from \"react/cjs/react.development\";\r\nimport { GameApi } from \"../api\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\nimport getOtherPlayersAlive from \"../utils/getOtherPlayersAlive\";\r\nimport getPlayerById from \"../utils/getPlayerById\";\r\nimport isAlive from \"../utils/isAlive\";\r\nimport isMafia from \"../utils/isMafia\";\r\n\r\nexport default function MafiaPage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  game,\r\n  playerId,\r\n}) {\r\n  // game models\r\n  const [player, setPlayer] = useState(getPlayerById(game, playerId));\r\n  const [otherPlayers, setOtherPlayers] = useState(\r\n    getOtherPlayersAlive(game, playerId)\r\n  );\r\n  const [hasVoted, setHasVoted] = useState(false);\r\n  // ui state\r\n  const [selectedPlayerId, setSelectedPlayerId] = useState(null);\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // methods\r\n  const onKill = () => {\r\n    setHasVoted(true);\r\n    GameApi.mafiaKill(game.id, player.name, selectedPlayerId).catch((e) =>\r\n      setSnackbarError(e)\r\n    );\r\n  };\r\n  // effects\r\n  useEffect(() => {\r\n    setPlayer(getPlayerById(game, playerId));\r\n  }, [game]);\r\n  return (\r\n    <>\r\n      <PanelHeader>{panelHeaderMessage}</PanelHeader>\r\n      {isMafia(player) && isAlive(player) && !hasVoted && (\r\n        <>\r\n          <Div>\r\n            <Title level=\"2\" weight=\"medium\">\r\n              Кого убить?\r\n            </Title>\r\n          </Div>\r\n          <Group>\r\n            {otherPlayers.map((player) => (\r\n              <Cell\r\n                mode=\"selectable\"\r\n                before={<Avatar src={player.photoUrl} />}\r\n                onChange={() => {\r\n                  setSelectedPlayerId(\r\n                    player.id === selectedPlayerId ? null : player.id\r\n                  );\r\n                }}\r\n                key={player.id}\r\n                checked={player.id === selectedPlayerId}\r\n              >\r\n                {player.name}\r\n              </Cell>\r\n            ))}\r\n          </Group>\r\n          <Div>\r\n            <Button\r\n              size=\"l\"\r\n              stretched\r\n              mode=\"commerce\"\r\n              disabled={selectedPlayerId === null}\r\n              onClick={onKill}\r\n            >\r\n              Убить\r\n            </Button>\r\n          </Div>\r\n        </>\r\n      )}\r\n      {isMafia(player) && isAlive(player) && hasVoted && (\r\n        <Div>Ваш голос учтен, ждем остальных игроков</Div>\r\n      )}\r\n      {isMafia(player) && !isAlive(player) && <Div>Вы мертвы</Div>}\r\n      {!isMafia(player) && <Div>Спокойной ночи!</Div>}\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { CardType } from \"../constants\";\r\n\r\nexport default (player) => player.card.type === CardType.Police;\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Cell,\r\n  Div,\r\n  Group,\r\n  ModalCard,\r\n  ModalRoot,\r\n  PanelHeader,\r\n  SplitCol,\r\n  SplitLayout,\r\n  Title,\r\n} from \"@vkontakte/vkui\";\r\nimport { Icon56Users3Outline } from \"@vkontakte/icons\";\r\nimport isPolice from \"../utils/isPolice\";\r\nimport { CardType } from \"../constants\";\r\nimport getPlayerById from \"../utils/getPlayerById\";\r\nimport { GameApi } from \"../api\";\r\nimport getOtherPlayersAlive from \"../utils/getOtherPlayersAlive\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\n\r\nconst PoliceModals = {\r\n  mafia: \"Mafia\",\r\n  civil: \"Civil\",\r\n};\r\n\r\nexport default function PolicePage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  game,\r\n  playerId,\r\n}) {\r\n  // game models\r\n  const [player, setPlayer] = useState(getPlayerById(game, playerId));\r\n  const [otherPlayers, setOtherPlayers] = useState(\r\n    getOtherPlayersAlive(game, playerId)\r\n  );\r\n  // ui state\r\n  const [selectedPlayerId, setSelectedPlayerId] = useState(null);\r\n  const [activeModal, setActiveModal] = useState(null);\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // methods\r\n  const onPoliceCheck = () => {\r\n    const selectedPlayer = otherPlayers.find(\r\n      (player) => player.id === selectedPlayerId\r\n    );\r\n    if (selectedPlayer.card.type === CardType.Mafia) {\r\n      setActiveModal(PoliceModals.mafia);\r\n    } else {\r\n      setActiveModal(PoliceModals.civil);\r\n    }\r\n  };\r\n  const onEndNight = () => {\r\n    setActiveModal(null);\r\n    GameApi.endNight(game.id).catch((e) => setSnackbarError(e));\r\n  };\r\n  // modal\r\n  const modal = (\r\n    <ModalRoot activeModal={activeModal}>\r\n      <ModalCard\r\n        id={PoliceModals.mafia}\r\n        header=\"Результат\"\r\n        subheader=\"Этот пользователь мафия\"\r\n        icon={<Icon56Users3Outline />}\r\n        onClose={onEndNight}\r\n        actions={\r\n          <Button size=\"l\" mode=\"primary\" onClick={onEndNight}>\r\n            Завершить ход\r\n          </Button>\r\n        }\r\n      />\r\n      <ModalCard\r\n        id={PoliceModals.civil}\r\n        header=\"Результат\"\r\n        subheader=\"Этот пользователь мирный житель\"\r\n        icon={<Icon56Users3Outline />}\r\n        onClose={onEndNight}\r\n        actions={\r\n          <Button size=\"l\" mode=\"primary\" onClick={onEndNight}>\r\n            Завершить ход\r\n          </Button>\r\n        }\r\n      />\r\n    </ModalRoot>\r\n  );\r\n  // effects\r\n  useEffect(() => {\r\n    setPlayer(getPlayerById(game, playerId));\r\n  }, [game]);\r\n  return (\r\n    <>\r\n      <PanelHeader>{panelHeaderMessage}</PanelHeader>\r\n      {isPolice(player) ? (\r\n        <SplitLayout modal={modal}>\r\n          <SplitCol>\r\n            <Div>\r\n              <Title level=\"2\" weight=\"medium\">\r\n                Кого проверить?\r\n              </Title>\r\n            </Div>\r\n            <Group>\r\n              {otherPlayers.map((player) => (\r\n                <Cell\r\n                  mode=\"selectable\"\r\n                  before={<Avatar src={player.photoUrl} />}\r\n                  onChange={() => {\r\n                    setSelectedPlayerId(\r\n                      player.id === selectedPlayerId ? null : player.id\r\n                    );\r\n                  }}\r\n                  key={player.id}\r\n                  checked={player.id === selectedPlayerId}\r\n                >\r\n                  {player.name}\r\n                </Cell>\r\n              ))}\r\n            </Group>\r\n            <Div>\r\n              <Button\r\n                size=\"l\"\r\n                stretched\r\n                mode=\"commerce\"\r\n                disabled={selectedPlayerId === null}\r\n                onClick={onPoliceCheck}\r\n              >\r\n                Проверить\r\n              </Button>\r\n            </Div>\r\n          </SplitCol>\r\n        </SplitLayout>\r\n      ) : (\r\n        <Div>Спокойной ночи!</Div>\r\n      )}\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport {\r\n  Avatar,\r\n  Button,\r\n  Cell,\r\n  Div,\r\n  Group,\r\n  PanelHeader,\r\n  Title,\r\n} from \"@vkontakte/vkui\";\r\nimport getPlayerById from \"../utils/getPlayerById\";\r\nimport { GameApi } from \"../api\";\r\nimport isAlive from \"../utils/isAlive\";\r\nimport getOtherPlayersAlive from \"../utils/getOtherPlayersAlive\";\r\nimport ErrorSnackbar from \"../components/ErrorSnackbar\";\r\n\r\nexport default function CivilsPage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  game,\r\n  playerId,\r\n}) {\r\n  // game models\r\n  const [player, setPlayer] = useState(getPlayerById(game, playerId));\r\n  const [otherPlayers, setOtherPlayers] = useState(\r\n    getOtherPlayersAlive(game, playerId)\r\n  );\r\n  const [hasVoted, setHasVoted] = useState(false);\r\n  // ui state\r\n  const [selectedPlayerId, setSelectedPlayerId] = useState(null);\r\n  const [snackbarError, setSnackbarError] = useState(null);\r\n  // methods\r\n  const onCivilsKill = () => {\r\n    setHasVoted(true);\r\n    GameApi.civilsKill(game.id, playerId, selectedPlayerId).catch((e) =>\r\n      setSnackbarError(e)\r\n    );\r\n  };\r\n  // effects\r\n  useEffect(() => {\r\n    setPlayer(getPlayerById(game, playerId));\r\n  }, [game]);\r\n  return (\r\n    <>\r\n      <PanelHeader>{panelHeaderMessage}</PanelHeader>\r\n      {isAlive(player) && !hasVoted && (\r\n        <>\r\n          <Div>\r\n            <Title level=\"2\" weight=\"medium\">\r\n              Кого осудить??\r\n            </Title>\r\n          </Div>\r\n          <Group>\r\n            {otherPlayers.map((player) => (\r\n              <Cell\r\n                mode=\"selectable\"\r\n                before={<Avatar src={player.photoUrl} />}\r\n                onChange={() => {\r\n                  setSelectedPlayerId(\r\n                    player.id === selectedPlayerId ? null : player.id\r\n                  );\r\n                }}\r\n                key={player.id}\r\n                checked={player.id === selectedPlayerId}\r\n              >\r\n                {player.name}\r\n              </Cell>\r\n            ))}\r\n          </Group>\r\n          <Div>\r\n            <Button\r\n              size=\"l\"\r\n              stretched\r\n              mode=\"commerce\"\r\n              disabled={selectedPlayerId === null}\r\n              onClick={onCivilsKill}\r\n            >\r\n              Осудить\r\n            </Button>\r\n          </Div>\r\n        </>\r\n      )}\r\n      {isAlive(player) && hasVoted && (\r\n        <Div>Ваш голос учтен, ждем остальных игроков</Div>\r\n      )}\r\n      {!isAlive(player) && <Div>Вы мертвы</Div>}\r\n      {snackbarError && (\r\n        <ErrorSnackbar\r\n          errorMessage={snackbarError}\r\n          closeSnackbar={() => setSnackbarError(null)}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n}\r\n","import { GamePhase, GameStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game &&\r\n  game.gameStatus === GameStatus.Started &&\r\n  game.gamePhase === GamePhase.BeforeNight;\r\n","export default __webpack_public_path__ + \"static/media/playersSleep.c4c1ee3c.mp3\";","export default __webpack_public_path__ + \"static/media/playersWakeUp.8798fe3d.mp3\";","export default __webpack_public_path__ + \"static/media/mafiaSleep.150eb60b.mp3\";","export default __webpack_public_path__ + \"static/media/mafiaWakeUp.3e03da91.mp3\";","export default __webpack_public_path__ + \"static/media/policeSleep.031070aa.mp3\";","export default __webpack_public_path__ + \"static/media/policeWakeUp.2662b9d8.mp3\";","import { Howl, Howler } from \"howler\";\r\nimport playersSleep from \"./assets/playersSleep.mp3\";\r\nimport playersWakeUp from \"./assets/playersWakeUp.mp3\";\r\nimport mafiaSleep from \"./assets/mafiaSleep.mp3\";\r\nimport mafiaWakeUp from \"./assets/mafiaWakeUp.mp3\";\r\nimport policeSleep from \"./assets/policeSleep.mp3\";\r\nimport policeWakeUp from \"./assets/policeWakeUp.mp3\";\r\n\r\nexport const soundManager = {\r\n  playersSleep: new Howl({\r\n    src: [playersSleep],\r\n  }),\r\n  playersWakeUp: new Howl({\r\n    src: [playersWakeUp],\r\n  }),\r\n  mafiaSleep: new Howl({\r\n    src: [mafiaSleep],\r\n  }),\r\n  mafiaWakeUp: new Howl({\r\n    src: [mafiaWakeUp],\r\n  }),\r\n  policeSleep: new Howl({\r\n    src: [policeSleep],\r\n  }),\r\n  policeWakeUp: new Howl({\r\n    src: [policeWakeUp],\r\n  }),\r\n};\r\n","import { Div, PanelHeader } from \"@vkontakte/vkui\";\r\nimport React from \"react\";\r\n\r\nexport default function IntroPage({\r\n  setActivePanel,\r\n  panelHeaderMessage,\r\n  hasSeenIntro,\r\n}) {\r\n  return (\r\n    <>\r\n      <PanelHeader>{panelHeaderMessage}</PanelHeader>\r\n      <Div>123</Div>\r\n    </>\r\n  );\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { AppRoot, View, Panel, Root } from \"@vkontakte/vkui\";\r\nimport \"@vkontakte/vkui/dist/vkui.css\";\r\nimport \"./App.css\";\r\nimport bridge from \"@vkontakte/vk-bridge\";\r\nimport { mainPanels } from \"./routes\";\r\nimport MainHomePage from \"./pages/Home.page\";\r\nimport MainCreateGamePage from \"./pages/CreateGame.page\";\r\nimport MainJoinGamePage from \"./pages/JoinGame.page\";\r\nimport MainWaitGamePage from \"./pages/WaitGame.page\";\r\nimport MainGamePage from \"./pages/Game.page\";\r\nimport { GameApi } from \"./api\";\r\nimport { GameAudioPhase } from \"./constants\";\r\nimport MafiaPage from \"./pages/Mafia.page\";\r\nimport PolicePage from \"./pages/Police.page\";\r\nimport CivilsPage from \"./pages/Civils.page\";\r\nimport isBeforeNightPhase from \"./utils/isBeforeNightPhase\";\r\nimport isMafiaTurnPhase from \"./utils/isMafiaTurnPhase\";\r\nimport isPoliceTurnPhase from \"./utils/isPoliceTurnPhase\";\r\nimport isCivilsTurnPhase from \"./utils/isCivilsTurnPhase\";\r\nimport isDiscussionPhase from \"./utils/isDiscussionPhase\";\r\nimport isGameFinished from \"./utils/isGameFinished\";\r\nimport getPlayerById from \"./utils/getPlayerById\";\r\nimport { soundManager } from \"./sound-manager\";\r\nimport IntroPage from \"./pages/Intro.page\";\r\n\r\nconst App = () => {\r\n  // game models\r\n  const [game, setGame] = useState(null);\r\n  const [playerId, setPlayerId] = useState(null);\r\n  const [playerPhotoUrl, setPlayerPhotoUrl] = useState(null);\r\n  const [gameAudioPhase, setGameAudioPhase] = useState(null);\r\n  // ui state\r\n  const [activeView, setActiveView] = useState(\"main\");\r\n  const [activePanel, setActivePanel] = useState(mainPanels.home);\r\n  const [intervalId, setIntervalId] = useState(null);\r\n  // methods\r\n  const subscribeToGame = (gameId) => {\r\n    const intervalId = setInterval(() => {\r\n      GameApi.getGame(gameId).then((responsee) => {\r\n        setGame(responsee.data);\r\n        setGameAudioPhase(responsee.data.gameAudioPhase);\r\n      });\r\n    }, 2000);\r\n    setIntervalId(intervalId);\r\n  };\r\n  // effects\r\n  useEffect(() => {\r\n    if (isGameFinished(game)) {\r\n      setActivePanel(mainPanels.game);\r\n      clearInterval(intervalId);\r\n      setIntervalId(null);\r\n    }\r\n    if (isBeforeNightPhase(game) || isDiscussionPhase(game)) {\r\n      setActivePanel(mainPanels.game);\r\n    }\r\n    if (isMafiaTurnPhase(game)) {\r\n      setActivePanel(mainPanels.mafia);\r\n    }\r\n    if (isPoliceTurnPhase(game)) {\r\n      setActivePanel(mainPanels.police);\r\n    }\r\n    if (isCivilsTurnPhase(game)) {\r\n      setActivePanel(mainPanels.civils);\r\n    }\r\n  }, [game]);\r\n  useEffect(() => {\r\n    if (game) {\r\n      const player = getPlayerById(game, playerId);\r\n      if (\r\n        player.isHost &&\r\n        (gameAudioPhase !== null || gameAudioPhase !== undefined)\r\n      ) {\r\n        switch (gameAudioPhase) {\r\n          case GameAudioPhase.MafiaSleep:\r\n            soundManager.mafiaSleep.play();\r\n            break;\r\n          case GameAudioPhase.MafiaWakeUp:\r\n            soundManager.mafiaWakeUp.play();\r\n            break;\r\n          case GameAudioPhase.PlayersSleep:\r\n            soundManager.playersSleep.play();\r\n            break;\r\n          case GameAudioPhase.PlayersWakeUp:\r\n            soundManager.playersWakeUp.play();\r\n            break;\r\n          case GameAudioPhase.PoliceSleep:\r\n            soundManager.policeSleep.play();\r\n            break;\r\n          case GameAudioPhase.PoliceWakeUp:\r\n            soundManager.policeWakeUp.play();\r\n            break;\r\n          default:\r\n        }\r\n      }\r\n    }\r\n  }, [gameAudioPhase]);\r\n  useEffect(() => {\r\n    bridge.send(\"VKWebAppGetUserInfo\").then((res) => {\r\n      setPlayerPhotoUrl(res.photo_200);\r\n    });\r\n  }, []);\r\n  useEffect(() => {\r\n    if (activePanel === mainPanels.home && intervalId) {\r\n      clearInterval(intervalId);\r\n      setIntervalId(null);\r\n    }\r\n  }, [activePanel]);\r\n\r\n  return (\r\n    <AppRoot>\r\n      <Root activeView={activeView}>\r\n        <View activePanel={activePanel} id=\"main\">\r\n          <Panel id={mainPanels.intro}>\r\n            <IntroPage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Добро пожаловать!\"\r\n            />\r\n          </Panel>\r\n          <Panel centered id={mainPanels.home} className=\"home-panel\">\r\n            <MainHomePage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Мафия\"\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.createGame} className=\"create-game-panel\">\r\n            <MainCreateGamePage\r\n              setActivePanel={setActivePanel}\r\n              setGame={setGame}\r\n              setPlayerId={setPlayerId}\r\n              subscribeToGame={subscribeToGame}\r\n              panelHeaderMessage=\"Создать игру\"\r\n              playerPhotoUrl={playerPhotoUrl}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.joinGame}>\r\n            <MainJoinGamePage\r\n              setActivePanel={setActivePanel}\r\n              setGame={setGame}\r\n              setPlayerId={setPlayerId}\r\n              subscribeToGame={subscribeToGame}\r\n              panelHeaderMessage=\"Присоединиться к игре\"\r\n              playerPhotoUrl={playerPhotoUrl}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.waitGame}>\r\n            <MainWaitGamePage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Ждем всех игроков\"\r\n              game={game}\r\n              playerId={playerId}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.game}>\r\n            <MainGamePage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Игра\"\r\n              game={game}\r\n              playerId={playerId}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.mafia}>\r\n            <MafiaPage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Ночь: ход Мафии\"\r\n              game={game}\r\n              playerId={playerId}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.police}>\r\n            <PolicePage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Ночь: ход Комиссара\"\r\n              game={game}\r\n              playerId={playerId}\r\n            />\r\n          </Panel>\r\n          <Panel id={mainPanels.civils}>\r\n            <CivilsPage\r\n              setActivePanel={setActivePanel}\r\n              panelHeaderMessage=\"Суд\"\r\n              game={game}\r\n              playerId={playerId}\r\n            />\r\n          </Panel>\r\n        </View>\r\n      </Root>\r\n    </AppRoot>\r\n  );\r\n};\r\nexport default App;\r\n","import { GamePhase, GameStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game &&\r\n  game.gameStatus === GameStatus.Started &&\r\n  game.gamePhase === GamePhase.Discussion;\r\n","import { GamePhase, GameStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game &&\r\n  game.gameStatus === GameStatus.Started &&\r\n  game.gamePhase === GamePhase.MafiaTurn;\r\n","import { GamePhase, GameStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game &&\r\n  game.gameStatus === GameStatus.Started &&\r\n  game.gamePhase === GamePhase.PoliceTurn;\r\n","import { GamePhase, GameStatus } from \"../constants\";\r\n\r\nexport default (game) =>\r\n  game &&\r\n  game.gameStatus === GameStatus.Started &&\r\n  game.gamePhase === GamePhase.CivilsTurn;\r\n","/* eslint-disable no-unused-vars */\n/* eslint-disable no-undef */\nimport React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport bridge from \"@vkontakte/vk-bridge\";\nimport App from \"./App\";\n\n// Init VK  Mini App\nbridge.send(\"VKWebAppInit\");\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\nif (process.env.NODE_ENV === \"development\") {\n  import(\"./eruda\").then(({ default: eruda }) => {}); // runtime download\n}\n"],"sourceRoot":""}